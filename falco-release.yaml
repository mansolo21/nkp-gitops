apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: falco # Cambiado a un nombre más representativo para la aplicación Falco
  namespace: default # O el namespace donde quieras desplegar Falco
spec:
  interval: 5m # Frecuencia con la que Flux verificará actualizaciones del chart
  chart:
    spec:
      chart: ./falco # EL NOMBRE EXACTO DEL CHART DENTRO DE TU REPOSITORIO (DEBE COINCIDIR CON Chart.yaml de Falco)
      version: "0.41.3" # LA VERSIÓN EXACTA DEL CHART (DEBE COINCIDIR CON Chart.yaml de Falco)
      sourceRef:
        kind: GitRepository
        name: nkp-gitops # Referencia a tu HelmRepository personalizado
        namespace: kommander-flux # Namespace donde creaste el HelmRepository
  values:
    # Aquí irían los valores específicos para configurar Falco
    # Por ejemplo, puedes revisar el 'values.yaml' del chart de Falco descargado
    # y adaptar tus valores aquí. Algunos valores comunes podrían ser:
    replicaCount: 1 # Generalmente Falco se despliega como un DaemonSet, revisa su Chart.yaml
    falcosidekick:
      enabled: true
      webui:
        enabled: true
    # ... otros valores que necesites configurar para Falco
